(function(){var e={45787:function(e,t,s){"use strict";s(82986),s(20784);var o=s(36369),a=s(96681),r=s(79425);s(57024);o["default"].use(a.XG7),o["default"].use(r.X);var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("NavigationComp"),t("router-view")],1)},n=[],l=function(){var e=this,t=e._self._c;return t("div",[t("b-navbar",{attrs:{toggleable:"sm",type:"light",variant:"transparent"}},[t("b-navbar-brand",[t("b-img",{attrs:{width:"50px",rounded:"circle",src:"/logo.png"}}),e._v(" Banda ")],1),t("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[t("b-navbar-nav",[e.$store.getters.isAuth?e._e():t("b-nav-item",{attrs:{to:"/"}},[e._v("Home")]),e.$store.getters.isAuth?e._e():t("b-nav-item",{attrs:{to:"/register"}},[e._v("Rejestracja")]),e.$store.getters.isAuth?t("b-nav-item",{attrs:{to:{name:"ChatView",params:{personId:this.$store.getters.nearestUser}}}},[e._v("Czat")]):e._e(),e.$store.getters.isAuth?e._e():t("b-nav-item",{attrs:{to:"/login"}},[e._v("Login")]),e.$store.getters.isAuth?t("b-nav-item",{attrs:{to:{name:"NewGroupCreateView"}}},[e._v("NewGroupCreateView")]):e._e()],1),e.$store.getters.isAuth?t("b-navbar-nav",{staticClass:"ml-auto"},[t("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("em",[e._v(e._s(e.$store.state.username))])]},proxy:!0}],null,!1,3538322823)},[t("b-dropdown-item",{attrs:{to:{name:"ProfileView",params:{personId:this.$store.state.userId}}}},[e._v("Profil")]),e.$store.getters.isAuth?t("b-dropdown-item",{on:{click:e.logout}},[e._v("Wyloguj")]):e._e()],1)],1):e._e()],1)],1)],1)},c=[],u={name:"NavigationComp",methods:{logout(){this.$store.dispatch("logout")}}},d=u,p=s(1001),m=(0,p.Z)(d,l,c,!1,null,"362eedac",null),g=m.exports,h={components:{NavigationComp:g}},f=h,v=(0,p.Z)(f,i,n,!1,null,null,null),b=v.exports,w=s(72631),_=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"section"},[t("div",{staticClass:"text"},[t("h2",{staticClass:"fade-in-left"},[e._v("Łączymy ludzi")]),t("h3",{staticClass:"fade-in-left"},[e._v("w Twojej okolicy!")]),t("p",{staticClass:"fade-in-up"},[e._v("Witaj w naszym serwisie społecznościowym, gdzie możesz nawiązać kontakt z osobami w różnym wieku w Twojej okolicy. Nasza misja to tworzenie silnych i trwałych więzi między mieszkańcami, niezależnie od wieku. Dołącz do nas i odkryj możliwości nawiązywania nowych znajomości, wymiany doświadczeń i spędzania czasu w inspirującym towarzystwie. Zacznij swoją przygodę z nami już teraz ")]),t("div",{staticClass:"fade-in-up"},[t("b-button",[e._v("Zaloguj się")]),t("b-button",[e._v("Zarejestruj się")])],1)]),t("div",{staticClass:"video-container"},[t("div",{staticClass:"color-overlay"}),t("video",{attrs:{src:"/media/video/people_walking.mp4",loop:"",muted:"",autoplay:""},domProps:{muted:!0}})])])])},y=[],$={name:"HomeView"},k=$,I=(0,p.Z)(k,_,y,!1,null,"04dfa721",null),C=I.exports,T=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"login-form"}},[t("div",{staticClass:"main-wrapper vh-100",staticStyle:{"background-color":"#508bfc"}},[t("b-container",{staticClass:"py-5 h-100"},[t("b-row",{staticClass:"d-flex justify-content-center align-items-center h-100"},[t("b-col",{staticClass:"col-md-8 col-md-8 col-lg-6 col-xl-5",attrs:{cols:"12"}},[t("b-card",{staticClass:"shadow-2-strong",staticStyle:{"border-radius":"1rem"}},[t("b-card-body",{staticClass:"p-5 text-center"},[t("h3",{staticClass:"mb-5"},[e._v("Zaloguj się")]),t("div",{staticClass:"form-outline mb-4"},[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Email:","label-for":"email"}},[t("b-form-input",{attrs:{id:"email",type:"email",state:e.$v.email.$dirty?!e.$v.email.$error:null,required:"",placeholder:"Wpisz swój email"},on:{input:function(t){e.$v.email.$model=t.trim()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("b-form-invalid-feedback",[e.$v.email.required?e._e():t("span",[e._v("To pole jest wymagane. ")]),e.$v.email.email?e._e():t("span",[e._v("Błędny adres email. ")])])],1),t("b-form-group",{attrs:{label:"Hasło:","label-for":"password"}},[t("b-form-input",{attrs:{if:"password",type:"password",state:e.$v.password.$dirty?!e.$v.password.$error:null,required:"",placeholder:"Wpisz swoje hasło"},on:{input:function(t){e.$v.password.$model=t.trim()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("b-form-invalid-feedback",[e.$v.password.required?e._e():t("span",[e._v("To pole jest wymagane. ")]),e.$v.password.minLength?e._e():t("span",[e._v("Hasło musi posiadać conajmniej 8 znaków. ")])])],1),t("b-button",{staticClass:"btn-lg btn-block mt-5",attrs:{type:"submit",variant:"primary"}},[e._v("Zaloguj się")])],1)],1)])],1)],1)],1)],1)],1)])},z=[],x=(s(57658),s(85795)),P={name:"LoginView",data(){return{email:"",password:""}},validations:{email:{required:x.C1,email:x.Do},password:{required:x.C1,minLength:(0,x.Ei)(8)}},methods:{async onSubmit(){await this.$store.dispatch("login",{email:this.email,password:this.password}),this.$store.getters.isAuth&&await this.$router.push({name:"LocationCheckView"})}}},S=P,j=(0,p.Z)(S,T,z,!1,null,"5c2f9eae",null),D=j.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"container-fluid h-100"},[0===e.$store.getters.nearestUser?t("div",{staticClass:"row justify-content-center h-100"},[e._v(" Reload? ")]):t("div",{staticClass:"row justify-content-center h-100"},[t("div",{staticClass:"col-md-4 col-xl-3 chat"},[t("div",{staticClass:"card mb-sm-3 mb-md-0 contacts_card"},[t("div",{staticClass:"card-header"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"form-control search",attrs:{type:"text",placeholder:"Wyszukiwanie...",name:""},domProps:{value:e.filter},on:{input:function(t){t.target.composing||(e.filter=t.target.value)}}}),t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text search_btn"},[t("b-icon",{attrs:{icon:"search"}})],1)])])]),t("div",{staticClass:"card-body contacts_body"},[t("ul",{staticClass:"contacts"},e._l(e.filteredPeople,(function(s,o){return t("router-link",{key:o,class:{active:s.username===e.$store.state.username,disabled:e.isLoading},attrs:{custom:"",to:{name:"ChatView",params:{personId:s.id}}},scopedSlots:e._u([{key:"default",fn:function({navigate:o}){return[t("li",{on:{click:o}},[t("div",{staticClass:"d-flex bd-highlight"},[t("div",{staticClass:"img_cont"},[t("b-avatar",{staticClass:"rounded-circle user_img",attrs:{src:e.profilePicture(s.profile_picture)}})],1),t("div",{staticClass:"user_info"},[t("span",[e._v(e._s(s.firstName)+" "+e._s(s.lastName))]),t("b-row",[t("b-col",[t("p",[e._v(e._s(e._f("formatDistance")(s.distance)))])]),t("b-col",e._l(s.groups,(function(e,s){return t("img",{key:s,attrs:{width:"20px",src:"/media/photos/"+e.logo_url}})})),0)],1)],1)])])]}}],null,!0)})})),1)]),t("div",{staticClass:"card-footer"},[t("b-button",{attrs:{variant:"primary",to:{name:"ChatView",params:{personId:this.$store.state.userId}}}},[e._v("Notatnik")])],1)])]),t("div",{staticClass:"col-md-8 col-xl-6 chat"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header msg_head"},[t("div",{staticClass:"d-flex bd-highlight"},[t("router-link",{attrs:{to:{name:"ProfileView",params:{personId:this.personId}}}},[t("div",{staticClass:"img_cont"},[t("b-avatar",{staticClass:"rounded-circle user_img",attrs:{src:e.$store.getters.profilePicture}}),t("span",{staticClass:"online_icon",class:{offline:!e.$store.getters.person.online}})],1)]),t("div",{staticClass:"user_info"},[t("span",[e._v(e._s(e.$store.getters.person.firstName)+" "+e._s(e.$store.getters.person.lastName))]),t("p",[e._v(e._s(null===e.$store.state.messages?0:e.$store.state.messages.length)+" Wiadomości")])])],1),t("span",{attrs:{id:"action_menu_btn"},on:{click:function(t){e.showActionMenu=!e.showActionMenu}}},[t("b-icon",{attrs:{icon:"three-dots-vertical"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showActionMenu,expression:"showActionMenu"}],staticClass:"action_menu"},[t("ul",[t("router-link",{attrs:{custom:"",to:{name:"ProfileView",params:{personId:this.personId}}},scopedSlots:e._u([{key:"default",fn:function({navigate:s}){return[t("li",{on:{click:s}},[t("b-icon",{attrs:{icon:"person-circle"}}),e._v(" Wyświetl profil ")],1)]}}])}),t("li",[t("b-icon",{attrs:{icon:"people-fill"}}),e._v(" Dodaj do bliskich znajomych ")],1),t("li",[t("b-icon",{attrs:{icon:"plus-lg"}}),e._v(" Dodaj do grupy ")],1),t("li",[t("b-icon",{attrs:{icon:"slash-circle"}}),e._v(" Zablokuj ")],1)],1)])]),t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isLoading?t("div",{staticClass:"card-body"},[t("div",{staticClass:"d-flex justify-content-center"},[t("div",[t("b-spinner",{attrs:{variant:"warning"}})],1)])]):t("div",{ref:"messagesContainer",staticClass:"card-body msg_card_body"},e._l(e.$store.state.messages,(function(s,o){return t("div",{key:o,staticClass:"d-flex mb-4",class:{"justify-content-start":String(s.receiver.id)===String(e.$store.state.userId),"justify-content-end":String(s.receiver.id)!==String(e.$store.state.userId)}},[String(s.receiver.id)===String(e.$store.state.userId)?t("div",{staticClass:"img_cont_msg"},[t("b-avatar",{staticClass:"rounded-circle user_img_msg",attrs:{src:e.$store.getters.profilePicture}})],1):e._e(),t("div",{class:{msg_cotainer:String(s.receiver.id)===String(e.$store.state.userId),msg_cotainer_send:String(s.receiver.id)!==String(e.$store.state.userId)}},[t("span",[e._v(e._s(s.text))]),t("span",{class:{msg_time:String(s.receiver.id)===String(e.$store.state.userId),msg_time_send:String(s.receiver.id)!==String(e.$store.state.userId)}},[e._v(e._s(e._f("formatDate")(s.created_at)))])]),String(s.receiver.id)!==String(e.$store.state.userId)?t("div",{staticClass:"img_cont_msg"},[t("b-avatar",{staticClass:"rounded-circle user_img_msg",attrs:{src:e.profilePicture(e.$store.state.profilePicture)}})],1):e._e()])})),0)]),t("div",{staticClass:"card-footer"},[t("div",{staticClass:"input-group"},[t("b-form-textarea",{staticClass:"type_msg",attrs:{name:"",placeholder:"Wpisz wiadomość..."},on:{keydown:e.handleKeydown},model:{value:e.newMessageText,callback:function(t){e.newMessageText=t},expression:"newMessageText"}}),t("b-input-group-append",{staticClass:"input-group-append"},[t("span",{staticClass:"input-group-text send_btn",on:{click:e.sendMessage}},[t("b-icon",{attrs:{icon:"cursor-fill"}})],1)])],1)])],1)])])])])},M=[],A={name:"ChatView",props:{personId:[String,Number]},data(){return{chatPollingInterval:1e4,showActionMenu:!1,filter:"",intervalId:null,conversation:[],isLoading:!0,newMessageText:"",shouldAnimate:!1,isFirstLoad:!0}},computed:{filteredPeople(){return this.$store.state.people.filter((e=>{const t=(e.firstName+" "+e.lastName).toLowerCase();return t.includes(this.filter.toLowerCase())}))}},watch:{$route(e,t){if(e.params.personId!==t.params.personId){this.clearAllIntervals(),this.isLoading=!0,this.isFirstLoad=!0,this.$store.state.person=[],this.$store.state.messages=[],this.getPerson(),this.getMessage();let e=setInterval(this.getMessage,this.chatPollingInterval);this.$store.state.intervalIds.push(e)}},conversation:{immediate:!1,handler(){this.isFirstLoad?this.isFirstLoad=!1:this.shouldAnimate=!0,this.scrollToBottom()}}},methods:{async submitNewDescription(){try{const e=this.$store.state.userId,t={description:this.description};await this.$store.dispatch("patchPersonDescription",{id:e,newData:t}),console.log(this.description),this.user.description=this.description,this.showTextArea=!1}catch(e){console.log(e)}},async getPeople(){await this.$store.dispatch("getPeople",{id:this.$store.state.userId})},async getPerson(){await this.$store.dispatch("getPerson",{id:this.personId})},async getMessage(){await this.$store.dispatch("getMessages",{sender:this.$store.state.userId,receiver:this.personId}),this.conversation.length!==this.$store.state.messages.length&&(console.log(this.conversation.length),console.log(this.$store.state.messages.length),this.conversation=this.$store.state.messages,console.log(this.conversation)),this.isLoading=!1},handleKeydown(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())},async sendMessage(){this.newMessageText&&(await this.$store.dispatch("sendMessages",{sender:this.$store.state.userId,receiver:this.personId,text:this.newMessageText}),this.conversation=this.$store.state.messages),console.log(this.newMessageText),this.newMessageText=""},scrollToBottom(){this.$nextTick((()=>{this.shouldAnimate?(this.animateScroll(),this.shouldAnimate=!1):this.$refs.messagesContainer.scrollTop=this.$refs.messagesContainer.scrollHeight}))},animateScroll(){const e=this.$refs.messagesContainer,t=e.scrollHeight,s=1500,o=e.scrollTop;let a=null;const r=i=>{null===a&&(a=i);const n=i-a,l=Math.min(n/s,1);e.scrollTop=o+(t-o)*l,l<1&&requestAnimationFrame(r)};requestAnimationFrame(r)},clearAllIntervals(){for(let e=0;e<this.$store.state.intervalIds.length;e++)clearInterval(this.$store.state.intervalIds[e]);this.$store.state.intervalIds=[]},profilePicture(e){return e.startsWith("http://")||e.startsWith("https://")?e:"/media/photos/"+e}},created(){this.getPeople(),this.getPerson(),this.getMessage();let e=setInterval(this.getMessage,this.chatPollingInterval);this.$store.state.intervalIds.push(e)},beforeRouteLeave(e,t,s){this.clearAllIntervals(),s()}},G=A,L=(0,p.Z)(G,N,M,!1,null,"219de63a",null),U=L.exports,q=s(63822),V=s(95410),E=s.n(V),O=s(91076);o["default"].use(q.ZP);const Z="http://127.0.0.1:8000/api/",B=O.Z.create({baseURL:{NODE_ENV:"production",VUE_APP_BASE_URL:"/test-chat",BASE_URL:"/test-chat/"}.VUE_APP_API_BASE_URL});function R(e){e.dispatch("showToast",{message:"Nie można połączyć się z serwerem. Sprawdź swoje połączenie sieciowe.",variant:"danger"})}function H(e,t){const s=e.response.data.error||"Niepoprawny email lub hasło",o="danger";t.dispatch("showToast",{message:s,variant:o})}async function W(e,t){const{config:s}=e;if(e.response&&401!==e.response.status){const s=e.response.data.error||"Wystąpił nieoczekiwany błąd",o="warning";t.dispatch("showToast",{message:s,variant:o})}if(401===e.response.status&&s&&!s.__isRetryRequest)try{await t.dispatch("refreshTokens"),s.__isRetryRequest=!0,s.headers["Authorization"]=`Bearer ${t.state.accessToken}`;const e=B(s);return console.log(e),e}catch(o){t.dispatch("logout"),"LoginView"!==Re.currentRoute.name&&Re.push({name:"LoginView"})}return Promise.reject(e)}function F(e,t){if(200===e.status&&e.data.message){const s=e.data.message;t.dispatch("showToast",{message:s,variant:"success"})}}const K=new q.ZP.Store({state:{accessToken:null,refreshToken:null,userId:null,username:null,profilePicture:"",messages:null,intervalIds:[],person:null,groupMembers:null,newGrupInfo:null,groupInfoDetail:null,people:[],backendSerwerResponse:null,data:{people:[],messages:[]}},getters:{isAuth:e=>null!==e.accessToken&&void 0!==e.accessToken,nearestUser:e=>(console.log(e.people),0===e.people.length?e.userId:e.people[0].id),profilePicture:e=>null===e.person||void 0===e.person.profile_picture?"":e.person.profile_picture.startsWith("http://")||e.person.profile_picture.startsWith("https://")?e.person.profile_picture:"/media/photos/"+e.person.profile_picture,person:e=>null===e.person?{online:!1,firstName:"",lastName:"",groups:[{group_site_url:"",id:0,logo_url:"",name:"Wczytywanie..."}]}:e.person},mutations:{auth(e,t){e.accessToken=t.accessToken,e.refreshToken=t.refreshToken,e.userId=t.userId,e.username=t.username,e.profilePicture=t.profile_picture,console.log("accessToken"),console.log(t.accessToken),console.log("refreshToken"),console.log(t.refreshToken),t.accessToken?B.defaults.headers.common["Authorization"]=`Bearer ${t.accessToken}`:delete B.defaults.headers.common["Authorization"]},updateTokens(e,t){e.accessToken=t.accessToken,console.log("accessToken"),console.log(t.accessToken),t.accessToken?B.defaults.headers.common["Authorization"]=`Bearer ${t.accessToken}`:delete B.defaults.headers.common["Authorization"]},clearAuth(e){e.accessToken=null,e.refreshToken=null,e.userId=null,e.username=null,e.profilePicture=null,delete B.defaults.headers.common["Authorization"]},setPerson(e,t){console.log(t),e.person=t},setPeople(e,t){e.people=t},setMessages(e,t){e.messages=t},addMessages(e,t){console.log(t),e.messages.push(t)},setGroupMembers(e,t){console.log(t),e.groupMembers=t},addGroupToUser(e,t){e.person.group.push(t)},setNewGroupInfo(e,t){e.newGrupInfo=t},setGroupInfoDetail(e,t){e.groupInfoDetail=t}},actions:{async login({commit:e,dispatch:t},s){try{console.log(s);let o=await B.post(`${Z}accounts/login`,E().stringify(s));if(void 0===o)return;console.log(o),console.log(o.data.localId),e("auth",{accessToken:o.data.access,refreshToken:o.data.refresh,userId:o.data.localId,username:o.data.username,profile_picture:o.data.profile_picture});const a=new Date,r=new Date(a.getTime()+1e3*o.data.refresh_token_lifetime);localStorage.setItem("accessToken",o.data.access),localStorage.setItem("refreshToken",o.data.refresh),localStorage.setItem("userId",o.data.localId),localStorage.setItem("username",o.data.username),localStorage.setItem("profile_picture",o.data.profile_picture),localStorage.setItem("expires",r),console.log(o.data.refresh_token_lifetime),setTimeout((()=>{t("logout")}),1e3*o.data.refresh_token_lifetime)}catch(o){console.log(o)}},async refreshTokens({state:e,commit:t}){try{let s=await B.post(`${Z}accounts/token-refresh/`,{refresh:e.refreshToken});t("updateTokens",{accessToken:s.data.access}),console.log("refreshTokens Action"),console.log(s.data.access),localStorage.setItem("accessToken",s.data.access)}catch(s){throw console.error(s),!1}},logout({commit:e}){e("clearAuth"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userId"),localStorage.removeItem("expires"),localStorage.removeItem("username"),localStorage.removeItem("profile_picture"),"LoginView"!==Re.currentRoute.name&&Re.push({name:"LoginView"})},autologin({commit:e,dispatch:t}){const s=localStorage.getItem("accessToken"),o=localStorage.getItem("refreshToken");if(!s)return;const a=localStorage.getItem("username"),r=localStorage.getItem("userId");if(!r)return;const i=localStorage.getItem("profile_picture"),n=new Date(localStorage.getItem("expires")),l=new Date;if(l>=n)return localStorage.removeItem("accessToken"),localStorage.removeItem("accessToken"),localStorage.removeItem("userId"),localStorage.removeItem("expires"),localStorage.removeItem("username"),void localStorage.removeItem("profilePicture");e("auth",{accessToken:s,refreshToken:o,userId:r,username:a,profile_picture:i}),console.log("Pozostało tyle sekund: ",n.getTime()-l.getTime()),setTimeout((()=>{t("logout")}),n.getTime()-l.getTime())},async register({commit:e},t){try{let e=await B.post(`${Z}accounts/register`,E().stringify(t));console.log(e)}catch(s){e("setResponse",{response:s}),console.log(s)}},async changePassword({state:e},t){try{let{data:s}=await B.post(`${Z}change-password`,t);console.log(s.msg),console.log(e.userId)}catch(s){console.log(s.response.data)}},async addFriend({state:e},t){try{let{data:s}=await B.post(`${Z}accounts/friend/`,t);console.log(s),console.log(e.userId)}catch(s){console.log(s)}},async getFriends({commit:e,state:t},s){if(null!=t.userId)try{let{data:t}=await B.get(`${Z}accounts/friend/`+s.id+"/");console.log("zrobione"),e("setFriends",Object.values(t))}catch(o){console.log(o)}},async delFriend({state:e},t){if(null!=e.userId)try{await B.delete(`${Z}accounts/friend/`,{data:t})}catch(s){console.log(s)}},async getPeople({commit:e,state:t},s){if(null!=t.userId)try{let{data:t}=await B.get(`${Z}list_users_with_distance/`+s.id+"/");e("setPeople",Object.values(t))}catch(o){console.log(o)}},async getPerson({commit:e,state:t},s){if(null!=t.userId)try{let{data:t}=await B.get(`${Z}accounts/person/`+s.id+"/");console.log(t),e("setPerson",t)}catch(o){console.log(o)}},async patchPersonDescription({commit:e,state:t},{id:s,newData:o}){if(null!=t.userId)try{let{data:t}=await B.patch(`${Z}accounts/person/${s}/patch/`,o);console.log(t),e("setPerson",t)}catch(a){console.log(a)}},async patchLocation({commit:e,state:t},{id:s,newData:o}){if(null!=t.userId)try{let{data:t}=await B.patch(`${Z}accounts/person/${s}/patch/`,o);console.log(t),e("setPerson",t)}catch(a){console.log(a)}},async getMessages({commit:e,state:t},s){if(null!=t.userId)try{let{data:t}=await B.get(`${Z}messages/`,{params:s});console.log(t),e("setMessages",Object.values(t))}catch(o){console.log(o)}},async sendMessages({commit:e},t){try{let{data:s}=await B.post(`${Z}messages/`,t);console.log(s),e("addMessages",s)}catch(s){console.log(s)}},async getGroupMembers({commit:e,state:t},s){if(null!=t.userId)try{let{data:t}=await B.get(`${Z}groups/${s.id}/users/`);console.log(t),e("setGroupMembers",t)}catch(o){console.log(o)}},async addMemberToGroup({commit:e},t){try{let{data:s}=await B.post(`${Z}group/join/`,t);console.log(s),e("addGroupToUser",t)}catch(s){console.log(s)}},async addGroup({commit:e},t){try{let{data:s}=await B.post(`${Z}group/create/`,t);console.log(s),e("setNewGroupInfo",s)}catch(s){console.log(s)}},async delMemberFromGroup({state:e},t){if(null!=e.userId)try{let{data:e}=await B.delete(`${Z}group/leave/`,{data:t});console.log(e)}catch(s){console.log(s)}},async getGroupDetail({commit:e,state:t},s){if(null!=t.userId)try{let{data:t}=await B.get(`${Z}groups/${s.id}`);e("setGroupInfoDetail",t),console.log(t)}catch(o){console.log(o)}},showToast({state:e},{message:t,variant:s}){this._vm.$bvToast.toast(t,{title:"success"===s?"Sukces":"Błąd",variant:s,solid:!0}),console.log("User ID: "+e.userId+" "+t)}},modules:{}});B.interceptors.response.use((e=>(F(e,K),e)),(e=>{if(e.response){if(!e.response||401!==e.response.status||K.state.userId)return W(e,K);H(e,K)}else R(K)}));var J=K,X=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"login-form"}},[t("div",{staticClass:"main-wrapper vh-100",staticStyle:{"background-color":"#508bfc"}},[t("b-container",{staticClass:"py-5 h-100"},[t("b-row",{staticClass:"d-flex justify-content-center align-items-center h-100"},[t("b-col",{staticClass:"col-lg-8 col-xl-8",attrs:{cols:"12"}},[t("b-card",{staticClass:"shadow-2-strong",staticStyle:{"border-radius":"1rem"}},[t("b-card-body",{staticClass:"p-5 text-center"},[t("h3",{staticClass:"mb-5"},[e._v("Zarejestruj się")]),t("div",{staticClass:"form-outline mb-4"},[t("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[t("b-form-group",{attrs:{label:"Imię:","label-for":"firstName","label-cols":"4"}},[t("b-form-input",{attrs:{id:"firstName",type:"text",state:e.$v.firstName.$dirty?!e.$v.firstName.$error:null,required:"",placeholder:"Podaj swoje imię "},on:{input:function(t){e.$v.firstName.$model=t.trim()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),t("b-form-invalid-feedback",[e.$v.firstName.required?e._e():t("span",[e._v("To pole jest wymagane. ")])])],1),t("b-form-group",{attrs:{label:"Nazwisko:","label-for":"lastName","label-cols":"4"}},[t("b-form-input",{attrs:{id:"lastName",type:"text",state:e.$v.lastName.$dirty?!e.$v.lastName.$error:null,required:"",placeholder:"Podaj swoje nazwisko"},on:{input:function(t){e.$v.lastName.$model=t.trim()}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),t("b-form-invalid-feedback",[e.$v.lastName.required?e._e():t("span",[e._v("To pole jest wymagane. ")])])],1),t("b-form-group",{attrs:{label:"Nazwa użytkownika:","label-for":"username","label-cols":"4"}},[t("b-form-input",{attrs:{id:"username",type:"text",state:e.$v.username.$dirty?!e.$v.username.$error:null,required:"",placeholder:"Podaj swoją nazwę użytkownika"},on:{input:function(t){e.$v.username.$model=t.trim()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("b-form-invalid-feedback",[e.$v.username.required?e._e():t("span",[e._v("To pole jest wymagane. ")])])],1),t("b-form-group",{attrs:{label:"Email:","label-for":"email","label-cols":"4"}},[t("b-form-input",{attrs:{id:"email",type:"email",state:e.$v.email.$dirty?!e.$v.email.$error:null,required:"",placeholder:"Podaj adres email"},on:{input:function(t){e.$v.email.$model=t.trim()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("b-form-invalid-feedback",[e.$v.email.required?e._e():t("span",[e._v("To pole jest wymagane. ")]),e.$v.email.email?e._e():t("span",[e._v("Błędny adres email. ")])])],1),t("b-form-group",{attrs:{label:"Data urodzenia:","label-for":"date_of_birth","label-cols":"4"}},[t("b-form-input",{attrs:{id:"date_of_birth",type:"date",state:e.date_of_birth?!e.$v.date_of_birth.$error:null,required:""},on:{input:function(t){e.$v.date_of_birth.$model=t.trim()}},model:{value:e.date_of_birth,callback:function(t){e.date_of_birth=t},expression:"date_of_birth"}}),t("b-form-invalid-feedback",[e.$v.date_of_birth.required?e._e():t("span",[e._v("To pole jest wymagane. ")]),e.$v.date_of_birth.minAge?e._e():t("span",[e._v("Osoby poniżej 13 roku życia nie mogą się zarejestrować.")]),e.$v.date_of_birth.maxAge?e._e():t("span",[e._v("Osoby powyżej 120 lat nie przechodzą validacji.")])])],1),t("b-form-group",{attrs:{label:"Hasło:","label-for":"password","label-cols":"4"}},[t("b-form-input",{attrs:{id:"password",type:"password",state:e.$v.password.$dirty?!e.$v.password.$error:null,required:"",placeholder:"Podaj hasło"},on:{input:function(t){e.$v.password.$model=t.trim()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("b-form-invalid-feedback",[e.$v.password.required?e._e():t("span",[e._v("To pole jest wymagane. ")]),e.$v.password.minLength?e._e():t("span",[e._v("Hasło musi posiadać conajmniej 8 znaków. ")])])],1),t("b-form-group",{attrs:{label:"Powtórz Hasło:","label-for":"password2","label-cols":"4"}},[t("b-form-input",{attrs:{id:"password2",type:"password",state:e.$v.password2.$dirty?!e.$v.password2.$error:null,required:"",placeholder:"Podaj hasło"},on:{input:function(t){e.$v.password2.$model=t.trim()}},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),t("b-form-invalid-feedback",[e.$v.password2.required?e._e():t("span",[e._v("To pole jest wymagane. ")]),e.$v.password2.sameAsPassword?e._e():t("span",[e._v("Hasła muszą być identyczne.")])])],1),t("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.$v.$invalid}},[e._v("Wyślij")]),e._v("   "),t("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1)],1)])],1)],1)],1)],1)],1)])},Q=[];function Y(e){return function(t){if(!t)return!0;const s=new Date(t),o=new Date,a=o-s,r=a/315576e5;return r>=e}}function ee(e){return function(t){if(!t)return!0;const s=new Date(t),o=new Date,a=o-s,r=a/315576e5;return r<=e}}var te={name:"register-main",data(){return{firstName:"",lastName:"",username:"",email:"",password:"",password2:"",date_of_birth:""}},validations:{firstName:{required:x.C1},lastName:{required:x.C1},username:{required:x.C1},email:{required:x.C1,email:x.Do},password:{required:x.C1,minLength:(0,x.Ei)(8)},password2:{required:x.C1,minLength:(0,x.Ei)(8),sameAsPassword:(0,x.sH)("password")},date_of_birth:{required:x.C1,minAge:Y(13),maxAge:ee(120)}},methods:{async onSubmit(e){e.preventDefault(),await this.$store.dispatch("register",{firstName:this.firstName,lastName:this.lastName,username:this.username,email:this.email,password:this.password,password2:this.password2,date_of_birth:this.date_of_birth}),await this.$router.push({name:"LoginView"})},onReset(e){e.preventDefault(),this.username="",this.email="",this.password="",this.password2="",this.date_of_birth="",this.$v.$reset()}},computed:{error(){return this.$store.state.response}}},se=te,oe=(0,p.Z)(se,X,Q,!1,null,null,null),ae=oe.exports,re=function(){var e=this,t=e._self._c;return t("b-container",[t("div",{staticClass:"row gutters-sm"},[t("div",{staticClass:"col-md-5 col-lg-6 mb-3"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"d-flex flex-column align-items-center text-center"},[t("b-avatar",{staticClass:"rounded-circle user_img",attrs:{src:e.$store.getters.profilePicture,width:"150"}}),t("div",{staticClass:"mt-3"},[t("h4",[e._v(e._s(e.$store.getters.person.firstName)+" "+e._s(e.$store.getters.person.lastName))]),t("p",{staticClass:"text-secondary mb-1"},[e._v("Full Stack Developer")]),t("p",{staticClass:"text-muted font-size-sm"},[e._v("Bay Area, San Francisco, CA")]),t("button",{staticClass:"btn btn-primary"},[e._v("Follow")]),t("button",{staticClass:"btn btn-outline-primary"},[e._v("Message")])])],1)])]),t("div",{staticClass:"card mt-3"},[t("b-table",{attrs:{"per-page":e.perPage,"current-page":e.currentPage,hover:"",items:e.$store.getters.person.groups,fields:e.fields,"tbody-tr-class":e.rowClass},scopedSlots:e._u([{key:"cell(name)",fn:function(s){return[t("div",{staticClass:"pointer",on:{click:function(t){return e.getGroupMembers(s.item.id)}}},[t("b-img",{attrs:{width:"24px",src:e.logoIcon(s.item.logo_url)}}),e._v(" "+e._s(s.item.name)+" ")],1)]}},{key:"head(name)",fn:function(){return[e._v(" Nazwa organizacji ")]},proxy:!0},{key:"cell(group_site_url)",fn:function(s){return[t("a",{attrs:{href:s.item.group_site_url}},[e._v(e._s(e._f("normalizeUrl")(s.item.group_site_url)))])]}},{key:"head(group_site_url)",fn:function(){return[t("div",{staticClass:"d-flex justify-content-between"},[t("div",[t("AddGroupModalComponent")],1),t("div",{on:{click:function(t){return e.unLockDelButtons()}}},[e.isUnlockDelButtons?t("div",[t("b-icon",{attrs:{icon:"unlock-fill"}})],1):t("div",[t("b-icon",{attrs:{icon:"lock-fill"}})],1)])])]},proxy:!0},e.isUnlockDelButtons?{key:"cell(del)",fn:function(s){return[t("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.delGroup(s.item.id,s)}}},[t("b-icon",{attrs:{icon:"trash-fill"}})],1)]}}:null],null,!0)}),t("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),t("div",{staticClass:"col-md-7 col-lg-6 mb-3"},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isLoading?t("div",{staticClass:"card-body"},[t("div",{staticClass:"d-flex justify-content-center"},[t("div",[t("b-spinner",{attrs:{variant:"warning"}})],1)])]):t("div",[t("div",{attrs:{id:"map-container"}},[t("l-map",{attrs:{zoom:e.zoom,center:e.center}},[t("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.people,(function(s,o){return t("l-marker",{key:o,attrs:{"lat-lng":[s.latitude,s.longitude]},on:{mouseover:function(t){!e.blockDetails&&e.showDetails(s)},click:e.blockHideDetails,mouseout:e.hideDetails}},[t("l-icon",{attrs:{"icon-size":[32,32],"icon-anchor":[16,32],"icon-url":"/media/photos/"===e.profilePicture(s.profile_picture)?"/media/photos/avatar.png":e.profilePicture(s.profile_picture)}}),t("l-tooltip",[e._v(e._s(s.name))])],1)})),e._l(e.lines,(function(s,o){return t("l-polyline",{key:o+"line",attrs:{"lat-lngs":s,color:e.lineColor}})}))],2)],1),t("div",{staticClass:"card mt-3"},[t("b-table",{attrs:{striped:"",hover:"",items:e.closest,fields:e.fields2},scopedSlots:e._u([{key:"cell(profile_picture)",fn:function(s){return[t("b-avatar",{staticClass:"rounded-circle user_img",attrs:{src:e.profilePicture(s.value)}})]}}])})],1)])])],1)])])},ie=[],ne=s(23512),le=s(29926),ce=s(7530),ue=s(19524),de=s(94886),pe=s(91820),me=function(){var e=this,t=e._self._c;return t("div",[t("span",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}]},[e._v("+")]),t("b-modal",{attrs:{id:"modal-center",centered:"",title:"Dodaj grupę"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.addMemberToGroup}},[t("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.addMemberToGroup.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"ID grupy","label-for":"id-input"}},[t("b-form-input",{attrs:{id:"id-input",required:""},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}})],1),t("b-form-group",{attrs:{label:"Hasło","label-for":"password-input"}},[t("b-form-input",{attrs:{id:"password-input",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)])],1)},ge=[],he={name:"AddGroupModalComponent",data(){return{groupId:null,password:null}},methods:{resetModal(){this.groupId=null,this.password=null,this.IdState=null,this.passwordState=null},async addMemberToGroup(){await this.$store.dispatch("addMemberToGroup",{group_id:this.groupId,password:this.password})}}},fe=he,ve=(0,p.Z)(fe,me,ge,!1,null,"7ba4092f",null),be=ve.exports,we={name:"ProfileView",components:{AddGroupModalComponent:be,LMap:ne.Z,LTileLayer:le.Z,LMarker:ce.Z,LTooltip:ue.Z,LPolyline:de.Z,LIcon:pe.Z},props:{personId:[String,Number]},data(){return{activeGroupIndex:0,blockDetails:!1,isLoading:!0,isUnlockDelButtons:!1,permit:!1,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:6,center:[51.9194,19.1451],markerLatLng:[51.504,-.159],people:[],closest:[],lineColor:"green",fields:[{key:"name"},{key:"group_site_url"}],fields2:[{key:"profile_picture",label:"Awatar"},{key:"name",label:"Nazwa",sortable:!0},{key:"distance",label:"Dystans (w km)",sortable:!0}],lines:[],activePerson:null,currentPage:1,perPage:5}},computed:{totalRows(){return this.$store.getters.person.groups.length}},methods:{unLockDelButtons(){this.isUnlockDelButtons?this.fields=this.fields.filter((e=>"del"!==e.key)):this.fields.push({key:"del"}),this.isUnlockDelButtons=!this.isUnlockDelButtons},async delGroup(e){this.$bvModal.msgBoxConfirm("Potwierdź, że chcesz odłączyć się od grupy.",{title:"Opuszczanie grupy",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"TAK",cancelTitle:"NIE",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((e=>{this.permit=e})),this.permit&&(await this.$store.dispatch("delMemberFromGroup",{group_id:e}),this.$store.state.person.groups=this.$store.state.person.groups.filter((t=>t.id!==e))),this.permit=!1},async getPerson(){await this.$store.dispatch("getPerson",{id:this.personId})},async getGroupMembers(e){this.isLoading=!0,this.activeGroupIndex=e,await this.$store.dispatch("getGroupMembers",{id:e}),await this.start(),this.isLoading=!1},showDetails(e){this.activePerson=e,this.calculateLines(e)},hideDetails(){this.blockDetails||(this.lines=[])},blockHideDetails(){this.blockDetails=!this.blockDetails,this.blockDetails?this.lineColor="blue":this.lineColor="green"},calculateLines(e){let t=this.people.map((t=>{let{latitude:s,longitude:o,...a}=t,r=this.calculateDistance(s,o,e.latitude,e.longitude);return{...a,latitude:s,longitude:o,distance:r}}));console.log(t),t.sort(((e,t)=>e.distance-t.distance)),this.closest=t.slice(1,6),this.lines=this.closest.map((t=>[[e.latitude,e.longitude],[t.latitude,t.longitude]]))},calculateDistance(e,t,s,o){function a(e){return e*Math.PI/180}let r=6371,i=a(e),n=a(s),l=a(s-e),c=a(o-t),u=Math.sin(l/2)*Math.sin(l/2)+Math.cos(i)*Math.cos(n)*Math.sin(c/2)*Math.sin(c/2),d=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),p=r*d;return Math.round(p)},start(){this.people=[];for(let e of this.$store.state.groupMembers){let t={id:e.id,name:`${e.firstName} ${e.lastName}`,latitude:e.latitude,longitude:e.longitude,profile_picture:e.profile_picture};this.people.push(t)}},rowClass(e,t){if("row"===t){if(!e||"row"!==t)return;if(e.id===this.activeGroupIndex)return"table-active"}},logoIcon(e){return e.startsWith("http://")||e.startsWith("https://")?e:"/media/photos/"+e},profilePicture(e){return e.startsWith("http://")||e.startsWith("https://")?e:"/media/photos/"+e}},async created(){await this.getPerson(),await this.getGroupMembers(this.$store.state.person.groups[0].id)}},_e=we,ye=(0,p.Z)(_e,re,ie,!1,null,"0a096830",null),$e=ye.exports,ke=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("p",[e._v("Lokalizacja: "+e._s(e.location))])])])},Ie=[],Ce={name:"LocationCheckView",data(){return{location:null}},methods:{getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition,this.showError,{enableHighAccuracy:!0}):this.location="Geolokalizacja nie jest wspierana przez tę przeglądarkę."},async showPosition(e){this.location=`Szerokość geograficzna: ${e.coords.latitude}, Długość geograficzna: ${e.coords.longitude}. Przekierowanie...`,await this.submitNewDescription(e.coords.latitude,e.coords.longitude),await this.getPeople(),await this.$router.push({name:"ChatView",params:{personId:this.$store.getters.nearestUser}})},showError(e){switch(e.code){case e.PERMISSION_DENIED:this.location="Sprawdź ustawienia przeglądarki. Użytkownik odmówił zgody na geolokalizację.";break;case e.POSITION_UNAVAILABLE:this.location="Informacje o lokalizacji są niedostępne.";break;case e.TIMEOUT:this.location="Próba uzyskania lokalizacji użytkownika trwała zbyt długo.";break;case e.UNKNOWN_ERROR:this.location="Wystąpił nieznany błąd.";break}},async submitNewDescription(e,t){try{const s=this.$store.state.userId,o={latitude:e,longitude:t};await this.$store.dispatch("patchLocation",{id:s,newData:o})}catch(s){console.log(s)}},async getPeople(){await this.$store.dispatch("getPeople",{id:this.$store.state.userId})}},mounted(){this.getLocation()}},Te=Ce,ze=(0,p.Z)(Te,ke,Ie,!1,null,"bb546bee",null),xe=ze.exports,Pe=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"login-form"}},[t("div",{staticClass:"main-wrapper vh-100",staticStyle:{"background-color":"#508bfc"}},[t("b-container",{staticClass:"py-5 h-100"},[t("b-row",{staticClass:"d-flex justify-content-center align-items-center h-100"},[t("b-col",{staticClass:"col-md-8 col-md-8 col-lg-6 col-xl-5",attrs:{cols:"12"}},[t("b-card",{staticClass:"shadow-2-strong",staticStyle:{"border-radius":"1rem"}},[t("b-card-body",{staticClass:"p-5 text-center"},[t("h3",{staticClass:"mb-5"},[e._v("Stwórz nową grupę")]),t("div",{staticClass:"form-outline mb-4"},[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.addGroup.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Nazwa grupy","label-for":"groupName","label-cols":"4"}},[t("b-form-input",{attrs:{id:"groupName",type:"text",state:e.$v.groupName.$dirty?!e.$v.groupName.$error:null,required:"",placeholder:"Podaj nazwę grupy"},on:{input:function(t){e.$v.groupName.$model=t.trim()}},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}})],1),t("b-form-group",{attrs:{label:"Url logo","label-for":"logo_url","label-cols":"4"}},[t("b-form-input",{attrs:{id:"logo_url",type:"text",state:e.$v.logoUrl.$dirty?!e.$v.logoUrl.$error:null,required:"",placeholder:"Podaj adres url do logo"},on:{input:function(t){e.$v.logoUrl.$model=t.trim()}},model:{value:e.logoUrl,callback:function(t){e.logoUrl=t},expression:"logoUrl"}})],1),t("b-form-group",{attrs:{label:"Adres url","label-for":"groupSiteUrl","label-cols":"4"}},[t("b-form-input",{attrs:{id:"groupSiteUrl",type:"text",state:e.$v.groupSiteUrl.$dirty?!e.$v.groupSiteUrl.$error:null,required:"",placeholder:"Podaj adres url do strony organizacji"},on:{input:function(t){e.$v.groupSiteUrl.$model=t.trim()}},model:{value:e.groupSiteUrl,callback:function(t){e.groupSiteUrl=t},expression:"groupSiteUrl"}})],1),t("b-form-group",{attrs:{label:"Hasło do grupy","label-for":"password","label-cols":"4"}},[t("b-form-input",{attrs:{id:"password",type:"text",disabled:"",state:e.$v.password.$dirty?!e.$v.password.$error:null},on:{input:function(t){e.$v.password.$model=t.trim()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("b-button",{on:{click:function(t){return t.preventDefault(),e.generatePassword.apply(null,arguments)}}},[e._v("Generuj hasło")]),t("b-button",{on:{click:function(t){return t.preventDefault(),e.copyToClipboard.apply(null,arguments)}}},[e._v("Kopiuj")])],1),t("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.$v.$invalid}},[e._v("Wyślij")])],1),t("b-button",{on:{click:e.showMsgBoxTwo}}),t("b-button",{on:{click:function(t){return e.$bvModal.show("modal-scoped")}}},[e._v("Open Modal")]),t("b-modal",{attrs:{id:"modal-scoped"},on:{ok:e.clearForm},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("h5",[e._v("Stworzona Grupa")])]},proxy:!0},{key:"default",fn:function(){return[t("b-table",{attrs:{striped:"",hover:"",items:e.newGroupInfo,fields:e.fields}}),t("p",[e._v("Dołączyłeś do grupy automatycznie. Opuścić grupę możesz w zakładce profil")]),t("p",[t("b",[e._v("Zachowaj ID")]),e._v(" stworzonej grupy. "),t("b",[e._v("ID i hasło")]),e._v(" posłuży innym użytkownikom do dołączenia do tej grupy ")])]},proxy:!0},{key:"modal-footer",fn:function({ok:s}){return[t("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){return s()}}},[e._v(" Następna ")])]}}])})],1)])],1)],1)],1)],1)],1)])},Se=[],je={name:"NewGroupCreateView",data(){return{groupName:null,logoUrl:null,groupSiteUrl:null,password:null,newGroupInfo:[],fields:[{key:"id",label:"ID"},{key:"name",label:"Nazwa"},{key:"logo_url",label:"Adres logo"},{key:"group_site_url",label:"Adres internetowy"},{key:"password",label:"Hasło"}]}},methods:{showMsgBoxTwo(){this.$bvModal.msgBoxOk("Please confirm that you want to delete everything.",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"primary",okTitle:"Następna",footerClass:"p-2",hideHeaderClose:!1,centered:!0})},async addGroup(){await this.$store.dispatch("addGroup",{name:this.groupName,logo_url:this.logoUrl,group_site_url:this.groupSiteUrl,password:this.password}),this.newGroupInfo.push(this.$store.state.newGrupInfo),this.newGroupInfo[this.newGroupInfo.length-1].password=this.password},generatePassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t=6,s="";for(let o=0;o<t;o++){let t=Math.floor(Math.random()*e.length);s+=e[t]}this.password=s},async copyToClipboard(){try{await navigator.clipboard.writeText(this.password),this.$bvToast.toast("Hasło skopiowane do schowka",{title:"Sukces",variant:"success",autoHideDelay:5e3})}catch(e){this.$bvToast.toast(`Nie udało się skopiować hasła do schowka: ${e}`,{title:"Błąd",variant:"danger",autoHideDelay:5e3})}},clearForm(){this.groupName=null,this.logoUrl=null,this.groupSiteUrl=null,this.generatePassword()}},watch:{newGroupInfo:{handler(){this.$bvModal.show("modal-scoped")}}},created(){this.generatePassword()},validations:{groupName:{required:x.C1,minLength:(0,x.Ei)(3)},logoUrl:{required:x.C1},groupSiteUrl:{required:x.C1,url:x.HQ},password:{required:x.C1}}},De=je,Ne=(0,p.Z)(De,Pe,Se,!1,null,"ea31c6f4",null),Me=Ne.exports,Ae=function(){var e=this,t=e._self._c;return t("div",[t("b-form",[t("b-form-group",{attrs:{id:"input-group-name",label:"Nazwa:","label-for":"input-name",description:"Grupa ma "+e.$store.state.groupInfoDetail.user_count+" użytkowników"}},[t("b-form-input",{attrs:{id:"input-id",type:"text",disabled:"",placeholder:"Enter group ID",required:""},model:{value:e.$store.state.groupInfoDetail.name,callback:function(t){e.$set(e.$store.state.groupInfoDetail,"name",t)},expression:"$store.state.groupInfoDetail.name"}})],1),t("b-form-group",{attrs:{id:"input-group-id",label:"ID:","label-for":"input-id"}},[t("b-form-input",{attrs:{id:"input-id",type:"number",disabled:"",placeholder:"Enter group ID",required:""},model:{value:e.$store.state.groupInfoDetail.id,callback:function(t){e.$set(e.$store.state.groupInfoDetail,"id",t)},expression:"$store.state.groupInfoDetail.id"}})],1),t("b-form-group",{attrs:{id:"input-group-id",label:"ID:","label-for":"input-id"}},[t("b-form-input",{attrs:{id:"input-id",type:"number",disabled:"",placeholder:"Enter group ID",required:""},model:{value:e.$store.state.groupInfoDetail.id,callback:function(t){e.$set(e.$store.state.groupInfoDetail,"id",t)},expression:"$store.state.groupInfoDetail.id"}})],1)],1),e._v(" "+e._s(e.$store.state.groupInfoDetail.id)+", "+e._s(e.$store.state.groupInfoDetail.name)+" "+e._s(e.$store.state.groupInfoDetail.user_count)+" ")],1)},Ge=[],Le={name:"JoinGroupView",data(){return{groupId:this.$route.params.groupId,password:this.$route.query.password||""}},methods:{async addMemberToGroup(){await this.$store.dispatch("addMemberToGroup",{group_id:this.groupId,password:this.password})},async getGroupDetail(){await this.$store.dispatch("getGroupDetail",{id:this.groupId})}},mounted(){this.getGroupDetail(),this.password&&console.log("asdasd")}},Ue=Le,qe=(0,p.Z)(Ue,Ae,Ge,!1,null,"52829dcc",null),Ve=qe.exports;o["default"].use(w.ZP),J.dispatch("autologin");const Ee=(e,t,s)=>{J.getters.isAuth?(console.log("authGuard "+J.getters.isAuth),s()):(console.log("authGuard "+J.getters.isAuth),"LoginView"!==t.name&&s({name:"LoginView"}))},Oe=(e,t,s)=>{J.getters.isAuth?(console.log("notAuthGuard "+J.state.isAuth),s({name:"home"})):(console.log("notAuthGuard "+J.state.isAuth),s())},Ze=[{path:"/",name:"home",component:C},{path:"/login",name:"LoginView",component:D,beforeEnter:Oe},{path:"/locationCheck",name:"LocationCheckView",component:xe,beforeEnter:Ee},{path:"/register",name:"register",component:ae,beforeEnter:Oe},{path:"/chat/:personId?",name:"ChatView",component:U,beforeEnter:Ee,props:!0},{path:"/profile/:personId",name:"ProfileView",component:$e,beforeEnter:Ee,props:!0},{path:"/group-create/",name:"NewGroupCreateView",component:Me,beforeEnter:Ee},{path:"/join-to-group/:groupId",name:"JoinGroup",component:Ve,beforeEnter:Ee,props:!0}],Be=new w.ZP({mode:"history",base:"/test-chat/",routes:Ze});var Re=Be;o["default"].filter("formatDate",(function(e){const t=new Date,s=new Date(e),o=Math.floor((t-s)/1e3),a=Math.floor(o/60),r=Math.floor(a/60);return o<60?"teraz":a>=1&&a<=59?`${a}min`:r>=1&&r<=24?`${r}godz`:r>=25&&r<=48?`wczoraj, ${s.toTimeString().split(" ")[0]}`:r>=49&&r<=72?`przedwczoraj, ${s.toTimeString().split(" ")[0]}`:s.toISOString().split("T")[0]+" "+s.toTimeString().split(" ")[0]})),o["default"].filter("formatDistance",(function(e){return e>1?`${e}km`:"poniżej 1 km"})),o["default"].filter("normalizeUrl",(function(e){let t=e.replace(/(^\w+:|^)\/\//,"");return t=t.split("/")[0],t.replace("www.","")}));var He=s(34951);o["default"].config.productionTip=!1,o["default"].use(He.ZP),new o["default"]({router:Re,store:J,render:e=>e(b)}).$mount("#app")},24654:function(){}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var n=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(n=!1,r<i&&(i=r));if(n){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,i=o[0],n=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var u=l(s)}for(t&&t(o);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},o=self["webpackChunktest_chat"]=self["webpackChunktest_chat"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(45787)}));o=s.O(o)})();
//# sourceMappingURL=app.38ecfa7e.js.map